#!/usr/bin/env python3
# -*- coding: utf-8 -*-
import os
import time
import sys
import termios

# 24Lx32C
position_perso = [22,5] #[5, 24]
position_tonneau1 = [8, 22]
position_tonneau2 = [1, 20]
game = [['S','C','O','R','E','=','0','0','0','0','0',' ','M','E','N','=','1',' ','H','I','-','S','C','O','R','E','=','3','6','6','0','0','\n'],
[' ',' ',' ' ,' ',' ',' ',' ',' ','■','■',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','\n'],
[' ',' ',' ' ,' ',' ',' ',' ' ,'■',' ','¨',' ','■',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','\n'],
[' ',' ','■','■',' ',' ',' ',' ','■','■',' ',' ',' ',' ','■','■',' ',' ','_','_','_','J','_','_',' ','_','_','_',' ',' ',' ',' ','\n'],
[' ',' ',' ' ,'■','■','■',' ','.','■','■',' ','.','■','■','■',' ',' ',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ',' ','\n'],
[' ','■',' ',' ',' ',' ','■','■','■','■','■',' ',' ',' ',' ',' ■',' ',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ','\n'],
[' ',' ',' ',' ',' ',' ','■','■','■','■','■',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ','\n'],
[' ',' ',' ',' ',' ','■',' ',' ',' ',' ','■',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ','\n'],
['_','_','_','_','■','■','_','_','_','_','■','■','_','_',' ','_','_','_',' ','_','_','_','_','_','H','_','_','_','_',' ',' ',' ','\n'],
[' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ','\n'],
[' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ','\n'],
['_','_',' ','_','_','_','_','_','_','_',' ','_','_','_','_','_','H','_','_','_','_','_','_','_','_','_','H','_','_','_','_','_',' ',' ',' ',' ',' ','\n'],
[' ',' ','H',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ','\n'],
[' ',' ','H',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ','\n'],
['_','_','H','_','_','_',' ','_','_','_','H','_','_','_','_','_','_','_',' ','_','_','_','_','_','_','_','_','_','H','_','_','_','\n'],
[' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','\n'],
[' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','\n'],
['_','_','_','_','_','_','H','_','_','_',' ','_','_','_','_','_','_','_','H','_','_','_','_','_','_','_','_','_','_','_','_','_','\n'],
[' ',' ',' ','H',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','\n'],
[' ',' ',' ','H',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','\n'],
['_','_','_','H','_','_','_','_','_','_','H','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_',' ','_','_','_',' ','\n'],
[' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ','\n'],
['_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','H','_','_','_','_','\n'],
['=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','\n']]



lignes = len(game)
colonnes = len(game[0])

def display(tab_to_disp):
	os.system('clear')
	for lignes in tab_to_disp:
		#print(len(lignes), end=" ")
		for colonnes in lignes:
			print(colonnes, end="")

def readchar() -> str:
    fd = sys.stdin.fileno()
    old_settings = termios.tcgetattr(fd)
    term = termios.tcgetattr(fd)
    try:
        term[3] &= ~(termios.ICANON | termios.ECHO | termios.IGNBRK | termios.BRKINT)
        termios.tcsetattr(fd, termios.TCSAFLUSH, term)

        ch = sys.stdin.read(1)
    finally:
        termios.tcsetattr(fd, termios.TCSADRAIN, old_settings)
    return ch


while True:
	game_to_disp = [['S','C','O','R','E','=','0','0','0','0','0',' ','M','E','N','=','1',' ','H','I','-','S','C','O','R','E','=','3','6','6','0','0','\n'],
[' ',' ',' ' ,' ',' ',' ',' ',' ','■','■',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','\n'],
[' ',' ',' ' ,' ',' ',' ',' ' ,'■',' ','¨',' ','■',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','\n'],
[' ',' ','■','■',' ',' ',' ',' ','■','■',' ',' ',' ',' ','■','■',' ',' ','_','_','_','J','_','_',' ','_','_','_',' ',' ',' ',' ','\n'],
[' ',' ',' ' ,'■','■','■',' ','.','■','■',' ','.','■','■','■',' ',' ',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ',' ','\n'],
[' ','■',' ',' ',' ',' ','■','■','■','■','■',' ',' ',' ',' ','■',' ',' ',' ',' ',' ',' ',' ',' ',  'H',' ',' ',' ',' ',' ',' ',' ','\n'],
[' ',' ',' ',' ',' ',' ','■','■','■','■','■',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ','\n'],
[' ',' ',' ',' ',' ','■',' ',' ',' ',' ','■',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ','\n'],
['_','_','_','_','■','■','_','_','_','_','■','■','_','_',' ','_','_','_',' ','_','_','_','_','_','H','_','_','_',' ',' ',' ',' ','\n'],
[' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ','\n'],
[' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ','\n'],
['_','_',' ','_','_','_','_','_','_','_',' ','_','_','_','_','_','H','_','_','_','_','_','_','_','_','_','H','_','_','_','_','_',' ',' ',' ',' ',' ','\n'],
[' ',' ','H',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ','\n'],
[' ',' ','H',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ','\n'],
['_','_','H','_','_','_',' ','_','_','_','H','_','_','_','_','_','_','_',' ','_','_','_','_','_','_','_','_','_','H','_','_','_','\n'],
[' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','\n'],
[' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','\n'],
['_','_','_','_','_','_','H','_','_','_',' ',' ','_','_','_','_','_','_','H','_','_','_','_','_','_','_','_','_','_','_','_','_','\n'],
[' ',' ',' ','H',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','\n'],
[' ',' ',' ','H',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','\n'],
['_','_','_','H','_','_','_','_','_','_','H','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_',' ','_','_','_',' ','\n'],
[' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','H',' ',' ',' ',' ','\n'],
['_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','_','H','_','_','_','_','\n'],
['=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','\n']]
	game_to_disp[position_perso[0]][position_perso[1]]="A"
	game_to_disp[position_tonneau1[0]][position_tonneau1[1]]="o"
	game_to_disp[position_tonneau2[0]][position_tonneau2[1]]="o"
	display(game_to_disp)
	print(position_tonneau2)

	if position_perso == [3,22]:
		print("Gagné")
		sys.exit()

	key = " " #readchar()
	time.sleep(0.1)
	match key:
		case "z":
			if (position_perso[0]>0) and (game[position_perso[0]-1][position_perso[1]]=="H" or game[position_perso[0]][position_perso[1]]=="H"):
				position_perso[0]=position_perso[0]-1
		case "q":
			#if(game[position_perso[0]][position_perso[1]-1]!="_"):
			#	input(str(position_perso[0])+" "+str(position_perso[1]-1)+":"+game[position_perso[0]][position_perso[1]-1])
			if (position_perso[1]>0) and (game[position_perso[0]][position_perso[1]-1]=="_" or game[position_perso[0]][position_perso[1]-1]=="H" or game[position_perso[0]+1][position_perso[1]-1]=="H"):
				position_perso[1]=position_perso[1]-1
		case "d":
			if (position_perso[1]<31) and (game[position_perso[0]][position_perso[1]+1]=="_" or game[position_perso[0]][position_perso[1]+1]=="H" or game[position_perso[0]+1][position_perso[1]+1]=="H"):
				position_perso[1]=position_perso[1]+1
		case "s":
			if (position_perso[0]<23) and (game[position_perso[0]+1][position_perso[1]]=="H"):
				position_perso[0]=position_perso[0]+1
		case "x":
			quit()
	
	if game[position_tonneau1[0]][position_tonneau1[1]] == " " or game[position_tonneau1[0]+1][position_tonneau1[1]] == "H":
		position_tonneau1[0] += 1 # depl ligne
	else:
		position_tonneau1[1] -= 1 # depl verti
	if position_tonneau1[1] == -1:
		position_tonneau1 = [8, 22]
		
		
	if game[position_tonneau2[0]][position_tonneau2[1]] == " " or game[position_tonneau2[0]+1][position_tonneau2[1]] == "H":
		position_tonneau2[0] += 1 # depl ligne
	else:
		position_tonneau2[1] += 1 # depl verti
	
	if position_tonneau2[1] == 32:
		position_tonneau2 = [1, 20]
	
